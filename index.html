<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Monitor</title>
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <script src="/js/echarts.min.js"></script>
  <script src="/js/echarts-gl.min.js"></script>
  <link rel="icon" href="/img/favicon.png">
</head>
<body onload="showSummary()">
<div class="container-xl border-bottom border-info" style="padding-top: 20px;">
  <div class="row" style="padding-bottom: 10px;">
    <div class="col-4">
      <h3><span id="networkId" class="text-capitalize"></span> Monitor</h3>
    </div>
    <div class="col-4 d-flex justify-content-center btn-group btn-group-sm">
      <a href="/"><button class="btn btn-info btn-sm">Overview</button></a>&nbsp;
      <a href="/missed.html"><button class="btn btn-secondary btn-sm">Missed Blocks</button></a>&nbsp;
      <a href="/network.html"><button class="btn btn-secondary btn-sm">Network</button></a>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <div class="row text-center">
        <div class="col-3">Discovered Nodes: <span id="totalNodes" class="fw-bold"></span></div>
        <div class="col-6">RPC Sources: <span id="rpcNodes" class="fw-bold"></span></div>
        <div class="col-3"><span class="invisible" id="lastUpdate"></span></div>
      </div>
      <div class="row text-center">
        <div class="col-3"><span id="missingNow">⚠</span> Validators Missing</div>
        <div class="col-6">Latest block is <span id="headblock" class="fw-bold">⚠</span> proposed by <span id="proposedBy">⚠</span></div>
        <div class="col-3">+<span id="seconds" class="fw-bold">⚠</span> seconds</div>
      </div>
    </div>
    <div>&nbsp;
    </div>
  </div>
</div>
<div class="container-xl" style=" padding-top: 20px;">
  <div class="row">
    <div class="col-10" style="height: 180px;" id="mempool"></div>
    <div class="col-2 text-sm-center fw-lighter">
      <p>Pending: <span id="pendingTx">?</span><br/></p>
      <p>Last: <span id="lastTx">?</span></p>
    </div>
  </div>
  <div class="row text-center"><h3>Node Locations</h3></div>
  <div class="row">
    <div class="col-6" id="sunburst" style="height: 600px;"></div>
    <div class="col-6" id="cities" style="height: 600px;"></div>
  </div>
  <div class="row" style="padding-top: 30px;">
    <p align="center">
      <a href="https://blockpane.com"><img src="img/bp-logo-text.svg" height="30" alt="© 2021 Block Pane LLC."></a>&nbsp;
      <a href="https://github.com/blockpane/cosmissed"><img src="img/GitHub-Mark.png" height="30"></a>
    </p>
  </div>
</div>
<script src="js/summary.js"></script>
<script src="js/txcounts.js"></script>
<script type="text/javascript">
    function showSummary(){
        chainInfo();
        txCounts();
    }
</script>

<script src="js/bootstrap.bundle.min.js"></script>
</body>
</html>